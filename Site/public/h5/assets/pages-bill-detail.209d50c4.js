import{g as t,h as a,X as l,n as e,d as s,r as i,B as u,o as d,e as n,w as c,f as _,i as o,j as r,k as f,p,u as m,t as g,l as h,F as y,v as k}from"./index-8b182b74.js";import{_ as v}from"./uv-loading-page.792746ec.js";import{_ as w,r as D}from"./uni-app.es.90f08a56.js";import{_ as b}from"./uv-icon.70699d37.js";import{_ as x}from"./uv-empty.ae111bf2.js";const I=w({data:()=>({theme:"",loading:!0,currentID:0,data:{},picUrl:[],isEffective:0}),onLoad(t){let a=this;Reflect.ownKeys(t).length>0&&t.hasOwnProperty("id")&&(a.currentID=t.id)},onShow(){let a=o(),l=t(),e={goods_id:0,url:l[l.length-1].route,platform:a.globalData.systemInfo.uniPlatform,model:a.globalData.systemInfo.deviceModel};this.$apis.visit.add(e),this.initData()},methods:{async initData(){let t,l=o(),e=this;if(await e.$onLaunched,e.theme=l.globalData.theme,t=await e.$apis.bill.getData({id:e.currentID}),0==t.code){let a=[];a[0]=t.data.pic,e.isEffective=1,e.data=t.data,e.picUrl=a}a(),e.loading=!1},showPic(){l({urls:this.picUrl,current:0})},turnUrl(t="",a=1){t&&"#"!=t&&(1==a&&e({url:t}),2==a&&s({url:t}),3==a&&i({url:t}))},delBill(){let t=this;u({title:"提示",content:"确认要删除吗？",success(a){a.confirm&&t.$apis.bill.deleteData({id:t.currentID}).then((t=>{0==t.code?i({url:"/pages/bill/list"}):console.log(t.msg)}))}})}}},[["render",function(t,a,l,e,s,i){const u=D(k("uv-loading-page"),v),o=r,w=D(k("uv-icon"),b),I=D(k("uv-empty"),x);return d(),n(o,{class:_(["content",s.theme])},{default:c((()=>[f(u,{loading:s.loading},null,8,["loading"]),s.loading?g("",!0):(d(),n(o,{key:0,class:"wrap"},{default:c((()=>[f(o,{class:"m_ctr"},{default:c((()=>[f(o,{class:"space_ctr"}),1==s.isEffective?(d(),n(o,{key:0},{default:c((()=>[f(o,{class:"yuan_ctr"},{default:c((()=>[f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("发票类型：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.type),1)])),_:1})])),_:1}),f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("发票抬头：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.tax_title),1)])),_:1})])),_:1}),""!=s.data.tax_sn?(d(),n(o,{key:0,class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("税号：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.tax_sn),1)])),_:1})])),_:1})):g("",!0),f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("开票金额：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.fee)+"元",1)])),_:1})])),_:1}),f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("开票备注：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.info),1)])),_:1})])),_:1}),f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("开票状态：")])),_:1}),1==s.data.state?(d(),n(o,{key:0},{default:c((()=>[p("待开票")])),_:1})):g("",!0),2==s.data.state?(d(),n(o,{key:1},{default:c((()=>[p("已开票")])),_:1})):g("",!0),3==s.data.state?(d(),n(o,{key:2},{default:c((()=>[p("已驳回")])),_:1})):g("",!0)])),_:1}),f(o,{class:"input_ctr",onClick:a[0]||(a[0]=t=>i.turnUrl("/pages/order/detail?id="+s.data.order_id))},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("所属订单：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.order_sn),1)])),_:1}),f(o,{class:"arrow"},{default:c((()=>[f(w,{name:"arrow","custom-prefix":"custom-icon",color:"#999"})])),_:1})])),_:1}),2==s.data.state?(d(),h(y,{key:1},[f(o,{class:"input_ctr",onClick:a[1]||(a[1]=t=>i.showPic())},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("发票编号：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.tax_no),1)])),_:1}),f(o,{class:"arrow"},{default:c((()=>[f(w,{name:"arrow","custom-prefix":"custom-icon",color:"#999"})])),_:1})])),_:1}),f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("操作时间：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.opt_date),1)])),_:1})])),_:1})],64)):g("",!0),3==s.data.state?(d(),h(y,{key:2},[f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("驳回原因：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.reason),1)])),_:1})])),_:1}),f(o,{class:"input_ctr"},{default:c((()=>[f(o,{class:"input_title"},{default:c((()=>[p("操作时间：")])),_:1}),f(o,null,{default:c((()=>[p(m(s.data.opt_date),1)])),_:1})])),_:1})],64)):g("",!0)])),_:1}),3==s.data.state?(d(),n(o,{key:0,class:"bill_btn",onClick:i.delBill},{default:c((()=>[p("删除")])),_:1},8,["onClick"])):g("",!0)])),_:1})):(d(),n(o,{key:1,class:"none_ctr"},{default:c((()=>[f(I,{icon:"/static/images/none.png",text:"开票信息不存在"})])),_:1}))])),_:1})])),_:1}))])),_:1},8,["class"])}],["__scopeId","data-v-149e463b"]]);export{I as default};
