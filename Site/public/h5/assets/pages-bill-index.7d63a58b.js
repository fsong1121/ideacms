import{g as a,h as e,H as t,A as l,a as s,r as o,o as i,e as n,w as u,f as r,i as d,j as c,k as f,p as _,u as m,t as p,v as g,M as h,N as v,O as b}from"./index-8b182b74.js";import{_ as y}from"./uv-loading-page.792746ec.js";import{_ as D,r as C}from"./uni-app.es.90f08a56.js";import{_ as I,a as j}from"./uv-radio-group.7035ecc0.js";import{_ as w}from"./uv-empty.ae111bf2.js";import"./uv-icon.70699d37.js";const S=D({data:()=>({theme:"",themeColor:"",loading:!0,currentID:0,type:1,radiovalue:"个人",fee:"0.00",isEffective:0}),onLoad(a){let e=this;Reflect.ownKeys(a).length>0&&a.hasOwnProperty("id")&&(e.currentID=a.id),e.initData()},onShow(){let e=d(),t=a(),l={goods_id:0,url:t[t.length-1].route,platform:e.globalData.systemInfo.uniPlatform,model:e.globalData.systemInfo.deviceModel};this.$apis.visit.add(l)},methods:{async initData(){let a,t=d(),l=this;await l.$onLaunched,l.theme=t.globalData.theme,l.themeColor=t.globalData.themeColor,a=await l.$apis.bill.getOrderData({id:l.currentID}),0==a.code&&(l.isEffective=1,l.fee=a.data.bill_price),e(),l.loading=!1},changeRadio(a){let e=this;e.type="单位"==a?2:1},formSubmit(a){let i=this,n=a.detail.value;n.type=i.type,n.fee=i.fee,n.order_id=i.currentID,n.form_token=t("formToken")||"",uni.$uv.throttle((function(){""!=n.title.replace(/\s/g,"")?(s({title:"提交中"}),i.$apis.bill.saveData(n).then((a=>{e(),0==a.code?o({url:"/pages/bill/list?state=1"}):l({title:a.msg,icon:"none",duration:2e3})}))):l({title:"发票抬头为空",icon:"error"})}))}}},[["render",function(a,e,t,l,s,o){const d=C(g("uv-loading-page"),y),D=c,S=C(g("uv-radio"),I),k=C(g("uv-radio-group"),j),$=h,x=v,E=C(g("uv-empty"),w),O=b;return i(),n(D,{class:r(["content",s.theme])},{default:u((()=>[f(d,{loading:s.loading},null,8,["loading"]),s.loading?p("",!0):(i(),n(O,{key:0,onSubmit:o.formSubmit},{default:u((()=>[f(D,{class:"wrap"},{default:u((()=>[f(D,{class:"m_ctr"},{default:u((()=>[f(D,{class:"space_ctr"}),1==s.isEffective?(i(),n(D,{key:0},{default:u((()=>[f(D,{class:"yuan_ctr"},{default:u((()=>[f(D,{class:"bill_info"},{default:u((()=>[_(" 普票与专票具有相同法律效力，可支持报销入账，默认开具电子普票；如要申请专票或纸质发票，请联系在线客服处理。 ")])),_:1})])),_:1}),f(D,{class:"yuan_ctr"},{default:u((()=>[f(D,{class:"input_ctr"},{default:u((()=>[f(D,{class:"input_title"},{default:u((()=>[_("发票类型")])),_:1}),f(k,{modelValue:s.radiovalue,"onUpdate:modelValue":e[0]||(e[0]=a=>s.radiovalue=a),onChange:o.changeRadio},{default:u((()=>[f(S,{name:"个人",label:"个人",activeColor:s.themeColor,customStyle:{margin:"0 10px 0 0"}},null,8,["activeColor"]),f(S,{name:"单位",label:"单位",activeColor:s.themeColor},null,8,["activeColor"])])),_:1},8,["modelValue","onChange"])])),_:1}),f(D,{class:"input_ctr"},{default:u((()=>[f(D,{class:"input_title"},{default:u((()=>[_("发票抬头")])),_:1}),f($,{name:"title",placeholder:"填写发票抬头(必填)"})])),_:1}),f(D,{class:"input_ctr"},{default:u((()=>[f(D,{class:"input_title"},{default:u((()=>[_("税号")])),_:1}),f($,{name:"sn",placeholder:"填写税号(非必填)"})])),_:1}),f(D,{class:"input_ctr"},{default:u((()=>[f(D,{class:"input_title"},{default:u((()=>[_("发票内容")])),_:1}),f(D,null,{default:u((()=>[_("商品明细")])),_:1})])),_:1}),f(D,{class:"input_ctr"},{default:u((()=>[f(D,{class:"input_title"},{default:u((()=>[_("发票金额")])),_:1}),f(D,null,{default:u((()=>[_(m(s.fee)+"元",1)])),_:1})])),_:1}),f(D,{class:"input_ctr",style:{border:"0"}},{default:u((()=>[f(D,{class:"input_title"},{default:u((()=>[_("更多内容")])),_:1}),f($,{name:"info",placeholder:"备注、地址、开户行等(非必填)"})])),_:1})])),_:1}),f(x,{class:"bill_btn","form-type":"submit"},{default:u((()=>[_("确定")])),_:1})])),_:1})):(i(),n(D,{key:1,class:"none_ctr"},{default:u((()=>[f(E,{icon:"/static/images/none.png",text:"订单不存在或已开票"})])),_:1}))])),_:1})])),_:1})])),_:1},8,["onSubmit"]))])),_:1},8,["class"])}],["__scopeId","data-v-f1fc8c26"]]);export{S as default};
