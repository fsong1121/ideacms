import{g as a,h as e,H as t,A as l,a as s,r as o,e as i,f as n,w as u,i as r,j as d,k as c,o as f,l as _,q as m,v as p,u as g,M as h,N as v,O as b}from"./index-Bnh-aLYr.js";import{_ as y}from"./uv-loading-page.D2Jx5K50.js";import{_ as D,r as C}from"./uni-app.es.CdPVnhCL.js";import{_ as j,a as w}from"./uv-radio-group.9sNs-ojn.js";import{_ as I}from"./uv-empty.CjW0sggQ.js";import"./uv-icon.DWcsmyzS.js";const k=D({data:()=>({theme:"",themeColor:"",loading:!0,currentID:0,type:1,radiovalue:"个人",fee:"0.00",isEffective:0}),onLoad(a){let e=this;Reflect.ownKeys(a).length>0&&a.hasOwnProperty("id")&&(e.currentID=a.id),e.initData()},onShow(){let e=d(),t=a(),l={goods_id:0,url:t[t.length-1].route,platform:e.globalData.systemInfo.uniPlatform,model:e.globalData.systemInfo.deviceModel};this.$apis.visit.add(l)},methods:{async initData(){let a,t=d(),l=this;await l.$onLaunched,l.theme=t.globalData.theme,l.themeColor=t.globalData.themeColor,a=await l.$apis.bill.getOrderData({id:l.currentID}),0==a.code&&(l.isEffective=1,l.fee=a.data.bill_price),e(),l.loading=!1},changeRadio(a){let e=this;e.type="单位"==a?2:1},formSubmit(a){let i=this,n=a.detail.value;n.type=i.type,n.fee=i.fee,n.order_id=i.currentID,n.form_token=t("formToken")||"",uni.$uv.throttle((function(){""!=n.title.replace(/\s/g,"")?(s({title:"提交中"}),i.$apis.bill.saveData(n).then((a=>{e(),0==a.code?o({url:"/pages/bill/list?state=1"}):l({title:a.msg,icon:"none",duration:2e3})}))):l({title:"发票抬头为空",icon:"error"})}))}}},[["render",function(a,e,t,l,s,o){const d=C(i("uv-loading-page"),y),D=c,k=C(i("uv-radio"),j),S=C(i("uv-radio-group"),w),$=h,x=v,E=C(i("uv-empty"),I),O=b;return f(),n(D,{class:r(["content",s.theme])},{default:u((()=>[_(d,{loading:s.loading},null,8,["loading"]),s.loading?g("",!0):(f(),n(O,{key:0,onSubmit:o.formSubmit},{default:u((()=>[_(D,{class:"wrap"},{default:u((()=>[_(D,{class:"m_ctr"},{default:u((()=>[_(D,{class:"space_ctr"}),1==s.isEffective?(f(),n(D,{key:0},{default:u((()=>[_(D,{class:"yuan_ctr"},{default:u((()=>[_(D,{class:"bill_info"},{default:u((()=>[m(" 普票与专票具有相同法律效力，可支持报销入账，默认开具电子普票；如要申请专票或纸质发票，请联系在线客服处理。 ")])),_:1})])),_:1}),_(D,{class:"yuan_ctr"},{default:u((()=>[_(D,{class:"input_ctr"},{default:u((()=>[_(D,{class:"input_title"},{default:u((()=>[m("发票类型")])),_:1}),_(S,{modelValue:s.radiovalue,"onUpdate:modelValue":e[0]||(e[0]=a=>s.radiovalue=a),onChange:o.changeRadio},{default:u((()=>[_(k,{name:"个人",label:"个人",activeColor:s.themeColor,customStyle:{margin:"0 10px 0 0"}},null,8,["activeColor"]),_(k,{name:"单位",label:"单位",activeColor:s.themeColor},null,8,["activeColor"])])),_:1},8,["modelValue","onChange"])])),_:1}),_(D,{class:"input_ctr"},{default:u((()=>[_(D,{class:"input_title"},{default:u((()=>[m("发票抬头")])),_:1}),_($,{name:"title",placeholder:"填写发票抬头(必填)"})])),_:1}),_(D,{class:"input_ctr"},{default:u((()=>[_(D,{class:"input_title"},{default:u((()=>[m("税号")])),_:1}),_($,{name:"sn",placeholder:"填写税号(非必填)"})])),_:1}),_(D,{class:"input_ctr"},{default:u((()=>[_(D,{class:"input_title"},{default:u((()=>[m("发票内容")])),_:1}),_(D,null,{default:u((()=>[m("商品明细")])),_:1})])),_:1}),_(D,{class:"input_ctr"},{default:u((()=>[_(D,{class:"input_title"},{default:u((()=>[m("发票金额")])),_:1}),_(D,null,{default:u((()=>[m(p(s.fee)+"元",1)])),_:1})])),_:1}),_(D,{class:"input_ctr",style:{border:"0"}},{default:u((()=>[_(D,{class:"input_title"},{default:u((()=>[m("更多内容")])),_:1}),_($,{name:"info",placeholder:"备注、地址、开户行等(非必填)"})])),_:1})])),_:1}),_(x,{class:"bill_btn","form-type":"submit"},{default:u((()=>[m("确定")])),_:1})])),_:1})):(f(),n(D,{key:1,class:"none_ctr"},{default:u((()=>[_(E,{icon:"/static/images/none.png",text:"订单不存在或已开票"})])),_:1}))])),_:1})])),_:1})])),_:1},8,["onSubmit"]))])),_:1},8,["class"])}],["__scopeId","data-v-f1fc8c26"]]);export{k as default};
