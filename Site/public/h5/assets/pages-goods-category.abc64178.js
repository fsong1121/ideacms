import{V as t,g as a,n as e,d as l,r as s,o,e as i,w as c,f as r,i as d,j as n,k as u,l as _,p as g,F as p,q as f,t as m,v as h,W as y,u as k,x as v}from"./index-8b182b74.js";import{_ as x}from"./uv-loading-page.792746ec.js";import{_ as w,r as L}from"./uni-app.es.90f08a56.js";import{_ as b}from"./uv-icon.70699d37.js";import{_ as C}from"./uv-divider.4e733a64.js";const N=w({data:()=>({theme:"",loading:!0,activeIndex:0,topNum:0,scrollW:0,numList:[],dataList:[],mobileSetting:{}}),onLoad(){t({success:t=>{this.scrollW=t.windowWidth>=750?750:t.windowWidth}})},onShow(){let t=d(),e=a(),l={goods_id:0,url:e[e.length-1].route,platform:t.globalData.systemInfo.uniPlatform,model:t.globalData.systemInfo.deviceModel};this.$apis.visit.add(l),this.initData()},methods:{async initData(){let t,a=d(),e=this;await e.$onLaunched,e.theme=a.globalData.theme,e.mobileSetting=a.globalData.mobileSetting,t=await e.$apis.goods.getCategory();let l=t.data,s=new Array,o=0,i=0;for(let c=0;c<l.length;c++)0==l[c].parent_id&&(s[o]=new Array,s[o].id=c,s[o].topNum=i,1==e.mobileSetting.category_type?i=i+50+Math.ceil(l[c].child_count/3)*((e.scrollW-130)/3+34):(t=await e.$apis.goods.getList({field:"id,title,pic,price,market_price,cat_id",cat:l[c].id,order:"is_top",size:500,page:1}),l[c].goodsList=t.data,i=i+50+Math.ceil(t.data.length/2)*((e.scrollW-130)/2+54)),o+=1);e.numList=s,e.dataList=l,e.loading=!1},changeNav(t){let a=this,e=t,l=a.topNum,s=a.numList;for(let o=0;o<s.length;o++)if(e==s[o].id){l=s[o].topNum;break}a.activeIndex=e,a.topNum=l},turnUrl(t="",a=1){t&&"#"!=t&&(1==a&&e({url:t}),2==a&&l({url:t}),3==a&&s({url:t}))},scrolltoupper(t){let a=this,e=a.numList,l=a.activeIndex;for(let s=0;s<e.length;s++)t.detail.scrollTop+1>e[s].topNum&&(l=e[s].id);a.activeIndex=l}}},[["render",function(t,a,e,l,s,d){const w=L(h("uv-loading-page"),x),N=L(h("uv-icon"),b),I=n,S=y,W=L(h("uv-divider"),C),j=v;return o(),i(I,{class:r(["content",s.theme])},{default:c((()=>[u(w,{loading:s.loading},null,8,["loading"]),s.loading?m("",!0):(o(),_(p,{key:0},[u(I,{class:"category_header"},{default:c((()=>[u(I,{class:"header_ctt"},{default:c((()=>[u(I,{class:"search_ctr",onClick:a[0]||(a[0]=t=>d.turnUrl("/pages/search/index"))},{default:c((()=>[u(I,{class:"search_ctt"},{default:c((()=>[u(I,{class:"search_ico"},{default:c((()=>[u(N,{name:"search","custom-prefix":"custom-icon"})])),_:1}),u(I,{class:"search_txt"},{default:c((()=>[g("试试输入您喜爱的商品搜一下")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(I,{class:"wrap"},{default:c((()=>[u(S,{class:"category_left","scroll-y":"true"},{default:c((()=>[(o(!0),_(p,null,f(s.dataList,((t,a)=>(o(),_(p,{key:a},[0==t.parent_id?(o(),_(p,{key:0},[s.activeIndex==a?(o(),i(I,{key:0,class:"category_left_cell_on",onClick:t=>d.changeNav(a)},{default:c((()=>[u(I,{class:"nav"},{default:c((()=>[g(k(t.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):(o(),i(I,{key:1,class:"category_left_cell",onClick:t=>d.changeNav(a)},{default:c((()=>[u(I,{class:"nav"},{default:c((()=>[g(k(t.title),1)])),_:2},1024)])),_:2},1032,["onClick"]))],64)):m("",!0)],64)))),128))])),_:1}),u(S,{class:"category_right","scroll-y":"true",onScroll:d.scrolltoupper,"scroll-top":s.topNum,"scroll-with-animation":"true"},{default:c((()=>[(o(!0),_(p,null,f(s.dataList,((t,a)=>(o(),_(p,{key:a},[0==t.parent_id?(o(),i(I,{key:0,class:"category_right_title"},{default:c((()=>[u(W,{text:t.title,textColor:"#333"},null,8,["text"])])),_:2},1024)):m("",!0),1==s.mobileSetting.category_type?(o(),_(p,{key:1},[t.parent_id>0&&2==t.deep?(o(),i(I,{key:0,class:"category_right_ctr",onClick:a=>d.turnUrl("/pages/goods/list?id="+t.id)},{default:c((()=>[u(I,{class:"category_right_pic"},{default:c((()=>[u(j,{mode:"widthFix",src:t.pic},null,8,["src"])])),_:2},1024),u(I,{class:"category_right_txt"},{default:c((()=>[g(k(t.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):m("",!0)],64)):(o(),_(p,{key:2},[0==t.parent_id?(o(),i(I,{key:0,class:"category_goods_ctr"},{default:c((()=>[(o(!0),_(p,null,f(t.goodsList,((t,a)=>(o(),i(I,{key:a,class:"category_goods_ctt",onClick:a=>d.turnUrl("/pages/goods/detail?id="+t.id)},{default:c((()=>[u(I,{class:"category_goods_pic"},{default:c((()=>[u(j,{mode:"widthFix",src:t.pic},null,8,["src"])])),_:2},1024),u(I,{class:"category_goods_t1"},{default:c((()=>[g(k(t.title),1)])),_:2},1024),u(I,{class:"category_goods_t2"},{default:c((()=>[u(I,null,{default:c((()=>[g("¥"+k(t.price),1)])),_:2},1024),u(I,{class:"span"},{default:c((()=>[g("¥"+k(t.market_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)):m("",!0)],64))],64)))),128))])),_:1},8,["onScroll","scroll-top"])])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-9e1d0bc0"]]);export{N as default};
