import{b as e,g as a,a as s,h as t,c as l,n as r,d as o,r as d,e as i,f as c,w as n,i as _,j as p,k as u,o as f,l as g,p as y,q as h,F as w,t as m,u as T,V as v,v as k,x as b}from"./index-qqngRkUa.js";import{_ as x}from"./uv-loading-page.B-dgjlQB.js";import{_ as D,r as C}from"./uni-app.es.DMzxE133.js";import{_ as L}from"./uv-divider.DZeIP-Lg.js";import{_ as j}from"./uv-empty.BEvkJ93x.js";import"./uv-icon.BH_bzOnD.js";const I=D({data:()=>({theme:"",loading:!0,currentID:0,order:"id",orderType:"desc",activityType:"",brand:0,size:20,page:1,loadingComplete:!1,dataList:[]}),onLoad(a){let s=this,t="商品列表";if(Reflect.ownKeys(a).length>0&&(a.hasOwnProperty("id")&&(s.currentID=a.id),a.hasOwnProperty("brand")&&(s.brand=a.brand,t="品牌商品"),a.hasOwnProperty("type")))switch(s.activityType=a.type,a.type){case"free":t="包邮商品";break;case"top":t="精品推荐";break;case"new":t="新品推荐";break;case"hot":t="热卖商品"}e({title:t}),s.initData()},onShow(){let e=p(),s=a(),t={goods_id:0,url:s[s.length-1].route,platform:e.globalData.systemInfo.uniPlatform,model:e.globalData.systemInfo.deviceModel};this.$apis.visit.add(t)},onPullDownRefresh(){let e=this;e.page=1,e.loadingComplete=!1,s({title:"加载中"}),e.initData("refresh")},methods:{async initData(e="",a=!1){let s,r=p(),o=this;await o.$onLaunched,o.theme=r.globalData.theme,s=await o.$apis.goods.getList({field:"id,title,pic,price,market_price,cat_id",cat:o.currentID,activity_type:o.activityType,brand:o.brand,order:o.order,order_type:o.orderType,size:o.size,page:o.page}),o.dataList=1==a?o.dataList.concat(s.data):s.data,s.data.length<o.size&&(o.loadingComplete=!0),"refresh"==e&&(t(),l()),t(),o.loading=!1},changeType(e){let a=this,t="desc"==a.orderType?"asc":"desc";"id"==e&&(t="desc"),a.order=e,a.orderType=t,a.page=1,a.loadingComplete=!1,s({title:"加载中"}),a.initData()},turnUrl(e="",a=1){e&&"#"!=e&&(1==a&&r({url:e}),2==a&&o({url:e}),3==a&&d({url:e}))},scrollToLower(){let e=this;e.loadingComplete||(e.page=e.page+1,s({title:"加载中"}),e.initData("",!0))}}},[["render",function(e,a,s,t,l,r){const o=C(i("uv-loading-page"),x),d=u,p=b,D=C(i("uv-divider"),L),I=C(i("uv-empty"),j),z=v;return f(),c(d,{class:_(["content",l.theme])},{default:n((()=>[g(o,{loading:l.loading},null,8,["loading"]),l.loading?T("",!0):(f(),y(w,{key:0},[g(d,{class:"goods_header"},{default:n((()=>[g(d,{class:"header_ctt"},{default:n((()=>[g(d,{class:"list_top"},{default:n((()=>[g(d,{class:"list_top_ctr"},{default:n((()=>[g(d,{class:"list_top_cell",onClick:a[0]||(a[0]=e=>r.changeType("id"))},{default:n((()=>[g(d,{class:_({list_top_text_on:"id"==l.order})},{default:n((()=>[h("综合")])),_:1},8,["class"])])),_:1})])),_:1}),g(d,{class:"list_top_ctr"},{default:n((()=>[g(d,{class:"list_top_cell",onClick:a[1]||(a[1]=e=>r.changeType("sales"))},{default:n((()=>[g(d,{class:_({list_top_text_on:"sales"==l.order})},{default:n((()=>[h("销量")])),_:1},8,["class"]),g(d,{class:"list_top_arrow"},{default:n((()=>[g(d,{class:_({arrow_up_on:"sales"==l.order&&"asc"==l.orderType,arrow_up:"sales"!==l.order||"asc"!==l.orderType})},null,8,["class"]),g(d,{class:_({arrow_down_on:"sales"==l.order&&"desc"==l.orderType,arrow_down:"sales"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),g(d,{class:"list_top_ctr"},{default:n((()=>[g(d,{class:"list_top_cell",onClick:a[2]||(a[2]=e=>r.changeType("price"))},{default:n((()=>[g(d,{class:_({list_top_text_on:"price"===l.order})},{default:n((()=>[h("价格")])),_:1},8,["class"]),g(d,{class:"list_top_arrow"},{default:n((()=>[g(d,{class:_({arrow_up_on:"price"==l.order&&"asc"==l.orderType,arrow_up:"price"!==l.order||"asc"!==l.orderType})},null,8,["class"]),g(d,{class:_({arrow_down_on:"price"==l.order&&"desc"==l.orderType,arrow_down:"price"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),g(d,{class:"list_top_ctr"},{default:n((()=>[g(d,{class:"list_top_cell",onClick:a[3]||(a[3]=e=>r.changeType("hits"))},{default:n((()=>[g(d,{class:_({list_top_text_on:"hits"===l.order})},{default:n((()=>[h("热度")])),_:1},8,["class"]),g(d,{class:"list_top_arrow"},{default:n((()=>[g(d,{class:_({arrow_up_on:"hits"==l.order&&"asc"==l.orderType,arrow_up:"hits"!==l.order||"asc"!==l.orderType})},null,8,["class"]),g(d,{class:_({arrow_down_on:"hits"==l.order&&"desc"==l.orderType,arrow_down:"hits"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(d,{class:"wrap"},{default:n((()=>[g(z,{class:"list_ctr","scroll-y":"true",onScrolltolower:r.scrollToLower},{default:n((()=>[g(d,{class:"goods_list_ctr"},{default:n((()=>[(f(!0),y(w,null,m(l.dataList,((e,a)=>(f(),c(d,{class:"goods_list_cell",key:a},{default:n((()=>[g(d,{onClick:a=>r.turnUrl("/pages/goods/detail?id="+e.id)},{default:n((()=>[g(p,{mode:"widthFix",src:e.pic},null,8,["src"]),g(d,{class:"goods_list_t1"},{default:n((()=>[h(k(e.title),1)])),_:2},1024),g(d,{class:"goods_list_t2"},{default:n((()=>[g(d,null,{default:n((()=>[h("¥"+k(e.price),1)])),_:2},1024),g(d,{class:"span"},{default:n((()=>[h("¥"+k(e.market_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),l.dataList.length>0?(f(),c(d,{key:0,class:"line_ctr"},{default:n((()=>[g(D,{textSize:"24rpx",text:"这是我的底线"})])),_:1})):T("",!0),l.dataList.length<1?(f(),c(d,{key:1,class:"none_ctr"},{default:n((()=>[g(I,{icon:"/static/images/none.png",text:"暂无商品"})])),_:1})):T("",!0)])),_:1})])),_:1},8,["onScrolltolower"])])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-b2a69931"]]);export{I as default};
