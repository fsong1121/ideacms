import{b as e,g as a,h as s,a as t,n as l,d as r,r as o,o as d,e as i,w as c,f as _,i as n,j as p,k as u,l as y,p as f,F as g,q as w,t as h,v as m,W as T,u as v,x as k}from"./index-8b182b74.js";import{_ as b}from"./uv-loading-page.792746ec.js";import{_ as x,r as L}from"./uni-app.es.90f08a56.js";import{_ as C}from"./uv-divider.4e733a64.js";import{_ as D}from"./uv-empty.ae111bf2.js";import"./uv-icon.70699d37.js";const j=x({data:()=>({theme:"",loading:!0,currentID:0,order:"id",orderType:"desc",activityType:"",brand:0,size:20,page:1,loadingComplete:!1,dataList:[]}),onLoad(a){let s=this,t="商品列表";if(Reflect.ownKeys(a).length>0&&(a.hasOwnProperty("id")&&(s.currentID=a.id),a.hasOwnProperty("brand")&&(s.brand=a.brand,t="品牌商品"),a.hasOwnProperty("type")))switch(s.activityType=a.type,a.type){case"free":t="包邮商品";break;case"top":t="精品推荐";break;case"new":t="新品推荐";break;case"hot":t="热卖商品"}e({title:t}),s.initData()},onShow(){let e=n(),s=a(),t={goods_id:0,url:s[s.length-1].route,platform:e.globalData.systemInfo.uniPlatform,model:e.globalData.systemInfo.deviceModel};this.$apis.visit.add(t)},methods:{async initData(e=!1){let a,t=n(),l=this;await l.$onLaunched,l.theme=t.globalData.theme,a=await l.$apis.goods.getList({field:"id,title,pic,price,market_price,cat_id",cat:l.currentID,activity_type:l.activityType,brand:l.brand,order:l.order,order_type:l.orderType,size:l.size,page:l.page}),l.dataList=1==e?l.dataList.concat(a.data):a.data,a.count<l.size&&(l.loadingComplete=!0),s(),l.loading=!1},changeType(e){let a=this,s="desc"==a.orderType?"asc":"desc";"id"==e&&(s="desc"),a.order=e,a.orderType=s,a.page=1,a.loadingComplete=!1,t({title:"加载中"}),a.initData()},turnUrl(e="",a=1){e&&"#"!=e&&(1==a&&l({url:e}),2==a&&r({url:e}),3==a&&o({url:e}))},scrollToLower(){let e=this;e.loadingComplete||(e.page=e.page+1,t({title:"加载中"}),e.initData(!0))}}},[["render",function(e,a,s,t,l,r){const o=L(m("uv-loading-page"),b),n=p,x=k,j=L(m("uv-divider"),C),I=L(m("uv-empty"),D),z=T;return d(),i(n,{class:_(["content",l.theme])},{default:c((()=>[u(o,{loading:l.loading},null,8,["loading"]),l.loading?h("",!0):(d(),y(g,{key:0},[u(n,{class:"goods_header"},{default:c((()=>[u(n,{class:"header_ctt"},{default:c((()=>[u(n,{class:"list_top"},{default:c((()=>[u(n,{class:"list_top_ctr"},{default:c((()=>[u(n,{class:"list_top_cell",onClick:a[0]||(a[0]=e=>r.changeType("id"))},{default:c((()=>[u(n,{class:_({list_top_text_on:"id"==l.order})},{default:c((()=>[f("综合")])),_:1},8,["class"])])),_:1})])),_:1}),u(n,{class:"list_top_ctr"},{default:c((()=>[u(n,{class:"list_top_cell",onClick:a[1]||(a[1]=e=>r.changeType("sales"))},{default:c((()=>[u(n,{class:_({list_top_text_on:"sales"==l.order})},{default:c((()=>[f("销量")])),_:1},8,["class"]),u(n,{class:"list_top_arrow"},{default:c((()=>[u(n,{class:_({arrow_up_on:"sales"==l.order&&"asc"==l.orderType,arrow_up:"sales"!==l.order||"asc"!==l.orderType})},null,8,["class"]),u(n,{class:_({arrow_down_on:"sales"==l.order&&"desc"==l.orderType,arrow_down:"sales"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),u(n,{class:"list_top_ctr"},{default:c((()=>[u(n,{class:"list_top_cell",onClick:a[2]||(a[2]=e=>r.changeType("price"))},{default:c((()=>[u(n,{class:_({list_top_text_on:"price"===l.order})},{default:c((()=>[f("价格")])),_:1},8,["class"]),u(n,{class:"list_top_arrow"},{default:c((()=>[u(n,{class:_({arrow_up_on:"price"==l.order&&"asc"==l.orderType,arrow_up:"price"!==l.order||"asc"!==l.orderType})},null,8,["class"]),u(n,{class:_({arrow_down_on:"price"==l.order&&"desc"==l.orderType,arrow_down:"price"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),u(n,{class:"list_top_ctr"},{default:c((()=>[u(n,{class:"list_top_cell",onClick:a[3]||(a[3]=e=>r.changeType("hits"))},{default:c((()=>[u(n,{class:_({list_top_text_on:"hits"===l.order})},{default:c((()=>[f("热度")])),_:1},8,["class"]),u(n,{class:"list_top_arrow"},{default:c((()=>[u(n,{class:_({arrow_up_on:"hits"==l.order&&"asc"==l.orderType,arrow_up:"hits"!==l.order||"asc"!==l.orderType})},null,8,["class"]),u(n,{class:_({arrow_down_on:"hits"==l.order&&"desc"==l.orderType,arrow_down:"hits"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(n,{class:"wrap"},{default:c((()=>[u(z,{class:"list_ctr","scroll-y":"true",onScrolltolower:r.scrollToLower},{default:c((()=>[u(n,{class:"goods_list_ctr"},{default:c((()=>[(d(!0),y(g,null,w(l.dataList,((e,a)=>(d(),i(n,{class:"goods_list_cell",key:a},{default:c((()=>[u(n,{onClick:a=>r.turnUrl("/pages/goods/detail?id="+e.id)},{default:c((()=>[u(x,{mode:"widthFix",src:e.pic},null,8,["src"]),u(n,{class:"goods_list_t1"},{default:c((()=>[f(v(e.title),1)])),_:2},1024),u(n,{class:"goods_list_t2"},{default:c((()=>[u(n,null,{default:c((()=>[f("¥"+v(e.price),1)])),_:2},1024),u(n,{class:"span"},{default:c((()=>[f("¥"+v(e.market_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),l.dataList.length>0?(d(),i(n,{key:0,class:"line_ctr"},{default:c((()=>[u(j,{textSize:"24rpx",text:"这是我的底线"})])),_:1})):h("",!0),l.dataList.length<1?(d(),i(n,{key:1,class:"none_ctr"},{default:c((()=>[u(I,{icon:"/static/images/none.png",text:"暂无商品"})])),_:1})):h("",!0)])),_:1})])),_:1},8,["onScrolltolower"])])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-3aa1b8db"]]);export{j as default};
