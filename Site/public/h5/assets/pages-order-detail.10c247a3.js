import{g as a,n as t,d as e,r as s,B as l,a as d,h as n,A as _,m as r,o,e as i,w as c,f as u,i as f,j as p,k as m,l as y,t as x,p as g,u as k,F as h,q as D,v as b,C,x as w}from"./index-61bca09a.js";import{_ as v}from"./uv-loading-page.a3cea9e4.js";import{_ as O,r as U}from"./uni-app.es.c541313a.js";import{_ as I}from"./uv-icon.06d9cba4.js";import{_ as $}from"./uv-count-down.c6f611cd.js";const j=O({data:()=>({theme:"",loading:!0,currentID:0,timeData:{},data:{}}),onLoad(a){let t=this;Reflect.ownKeys(a).length>0&&(t.currentID=a.hasOwnProperty("id")?a.id:0)},onShow(){let t=f(),e=a(),s={goods_id:0,url:e[e.length-1].route,platform:t.globalData.systemInfo.uniPlatform,model:t.globalData.systemInfo.deviceModel};this.$apis.visit.add(s),this.initData()},methods:{async initData(){let a,t=f(),e=this;await e.$onLaunched,e.theme=t.globalData.theme,a=await e.$apis.order.getData({id:e.currentID}),0==a.code?(1==a.data.order_state_no&&a.data.close_time<=0&&e.cancelOrder(a.data.id,2),e.data=a.data):e.data={},e.loading=!1},onChange(a){this.timeData=a},turnUrl(a="",l=1){a&&"#"!=a&&(1==l&&t({url:a}),2==l&&e({url:a}),3==l&&s({url:a}))},cancelOrder(a,t=1){let e=this;1==t?l({title:"提示",content:"确认要取消订单吗？",success(t){t.confirm&&(d({title:"加载中"}),e.$apis.order.cancelData({id:a}).then((a=>{n(),0==a.code?e.initData():_({title:a.msg,icon:"none"})})))}}):(d({title:"加载中"}),e.$apis.order.cancelData({id:a}).then((a=>{n(),0==a.code?e.initData():_({title:a.msg,icon:"none"})})))},delOrder(a){let e=this;l({title:"提示",content:"确认要删除订单吗？",success(s){s.confirm&&(d({title:"加载中"}),e.$apis.order.deleteData({id:a}).then((a=>{n(),0==a.code?t({url:"/pages/order/list"}):_({title:a.msg,icon:"none"})})))}})},receiptOrder(a){let t=this;l({title:"提示",content:"确认已收到货了吗？",success(e){e.confirm&&(d({title:"加载中"}),t.$apis.order.receiptData({id:a}).then((a=>{n(),0==a.code?t.initData():_({title:a.msg,icon:"none"})})))}})},onCall(){let a=f();r({phoneNumber:a.globalData.siteInfo.phone})}}},[["render",function(a,t,e,s,l,d){const n=U(b("uv-loading-page"),v),_=U(b("uv-icon"),I),r=p,f=U(b("uv-count-down"),$),O=w;return o(),i(r,{class:u(["content",l.theme])},{default:c((()=>[m(n,{loading:l.loading},null,8,["loading"]),l.loading?x("",!0):(o(),y(h,{key:0},[m(r,{class:"wrap"},{default:c((()=>[m(r,{class:"m_ctr"},{default:c((()=>[m(r,{class:"order_state_ctr"},{default:c((()=>[m(r,{class:"order_state_title"},{default:c((()=>["待付款"==l.data.order_state?(o(),i(_,{key:0,name:"underway-o","custom-prefix":"custom-icon",size:"36rpx",color:"#333",bold:!0})):x("",!0),"待发货"==l.data.order_state?(o(),i(_,{key:1,name:"send-gift-o","custom-prefix":"custom-icon",size:"36rpx",color:"#333",bold:!0})):x("",!0),"待收货"==l.data.order_state?(o(),i(_,{key:2,name:"logistics","custom-prefix":"custom-icon",size:"36rpx",color:"#333",bold:!0})):x("",!0),"已完成"==l.data.order_state?(o(),i(_,{key:3,name:"passed","custom-prefix":"custom-icon",size:"36rpx",color:"#333",bold:!0})):x("",!0),"已取消"==l.data.order_state?(o(),i(_,{key:4,name:"delete-o","custom-prefix":"custom-icon",size:"36rpx",color:"#333",bold:!0})):x("",!0),m(r,{class:"txt"},{default:c((()=>[g(k(l.data.order_state),1)])),_:1})])),_:1}),"待付款"==l.data.order_state?(o(),i(r,{key:0,class:"order_state_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("还剩")])),_:1}),m(f,{time:l.data.close_time,format:"HH:mm:ss",onChange:d.onChange,onFinish:t[0]||(t[0]=a=>d.cancelOrder(l.data.id,2))},{default:c((()=>[m(r,{class:"time"},{default:c((()=>[g(k(l.timeData.hours>=10?l.timeData.hours:"0"+l.timeData.hours)+":"+k(l.timeData.minutes>=10?l.timeData.minutes:"0"+l.timeData.minutes)+":"+k(l.timeData.seconds>=10?l.timeData.seconds:"0"+l.timeData.seconds),1)])),_:1})])),_:1},8,["time","onChange"]),m(r,null,{default:c((()=>[g("订单自动取消")])),_:1})])),_:1})):x("",!0)])),_:1}),m(r,{class:"yuan_ctr"},{default:c((()=>[m(r,{class:"order_address_ctr"},{default:c((()=>[m(r,{class:"order_address_ctt"},{default:c((()=>[m(r,null,{default:c((()=>[g(k(l.data.name)+" "+k(l.data.tel),1)])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.address),1)])),_:1})])),_:1})])),_:1})])),_:1}),m(r,{class:"yuan_ctr"},{default:c((()=>[(o(!0),y(h,null,D(l.data.goods_list,((a,t)=>(o(),i(r,{key:t,class:"order_goods_ctr",onClick:t=>d.turnUrl(a.goods_url)},{default:c((()=>[m(r,{class:"order_goods_pic"},{default:c((()=>[m(O,{mode:"widthFix",src:a.goods_pic},null,8,["src"])])),_:2},1024),m(r,{class:"order_goods_ctt"},{default:c((()=>[m(r,{class:"order_goods_title",style:C(""==a.spec_key_name?"-webkit-line-clamp:2;":"")},{default:c((()=>[g(k(a.goods_title),1)])),_:2},1032,["style"]),""!=a.spec_key_name?(o(),i(r,{key:0,class:"order_goods_subtitle"},{default:c((()=>[g(k(a.spec_key_name),1)])),_:2},1024)):x("",!0)])),_:2},1024),m(r,{class:"order_goods_price"},{default:c((()=>[m(r,null,{default:c((()=>[g("¥"+k(a.price),1)])),_:2},1024),m(r,null,{default:c((()=>[g("×"+k(a.amount),1)])),_:2},1024),l.data.order_state_no>1&&l.data.refund_state>0?(o(),i(r,{key:0,class:"span"},{default:c((()=>[g("退款中")])),_:1})):x("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),m(r,{class:"yuan_ctr"},{default:c((()=>[m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("订单类型")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.order_type_title),1)])),_:1})])),_:1}),m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("订单编号")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.order_sn),1)])),_:1})])),_:1}),m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("下单时间")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.add_date),1)])),_:1})])),_:1}),m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("买家备注")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.info),1)])),_:1})])),_:1})])),_:1}),l.data.order_state_no>1?(o(),i(r,{key:0,class:"yuan_ctr"},{default:c((()=>[m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("支付方式")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.pay_type),1)])),_:1})])),_:1}),l.data.pay_date?(o(),i(r,{key:0,class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("支付时间")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.pay_date),1)])),_:1})])),_:1})):x("",!0)])),_:1})):x("",!0),l.data.order_state_no>2?(o(),i(r,{key:1,class:"yuan_ctr"},{default:c((()=>[m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("发货方式")])),_:1}),2==l.data.express_type?(o(),i(r,{key:0,class:"span"},{default:c((()=>[g("无需发货")])),_:1})):(o(),i(r,{key:1,class:"span"},{default:c((()=>[g(k(l.data.express_express_title)+"("+k(l.data.express_sn)+")",1)])),_:1}))])),_:1}),m(r,{class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("发货时间")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.express_date),1)])),_:1})])),_:1}),""==l.data.express_info?(o(),i(r,{key:0,class:"detail_txt"},{default:c((()=>[m(r,null,{default:c((()=>[g("发货说明")])),_:1}),m(r,{class:"span"},{default:c((()=>[g(k(l.data.express_info),1)])),_:1})])),_:1})):x("",!0)])),_:1})):x("",!0),m(r,{class:"yuan_ctr"},{default:c((()=>[m(r,{class:"detail_txt1"},{default:c((()=>[m(r,null,{default:c((()=>[g("商品总计")])),_:1}),m(r,{class:"span"},{default:c((()=>[g("¥"+k(l.data.price),1)])),_:1})])),_:1}),m(r,{class:"detail_txt1"},{default:c((()=>[m(r,null,{default:c((()=>[g("运费")])),_:1}),m(r,{class:"span"},{default:c((()=>[g("¥"+k(l.data.express_price),1)])),_:1})])),_:1}),l.data.rebate_price>0?(o(),i(r,{key:0,class:"detail_txt1"},{default:c((()=>[m(r,null,{default:c((()=>[g("折扣")])),_:1}),m(r,{class:"span"},{default:c((()=>[g("-¥"+k(l.data.rebate_price),1)])),_:1})])),_:1})):x("",!0),l.data.discount_price>0?(o(),i(r,{key:1,class:"detail_txt1"},{default:c((()=>[m(r,null,{default:c((()=>[g("满减")])),_:1}),m(r,{class:"span"},{default:c((()=>[g("-¥"+k(l.data.discount_price),1)])),_:1})])),_:1})):x("",!0),l.data.coupon_price>0?(o(),i(r,{key:2,class:"detail_txt1"},{default:c((()=>[m(r,null,{default:c((()=>[g("优惠券")])),_:1}),m(r,{class:"span"},{default:c((()=>[g("-¥"+k(l.data.coupon_price),1)])),_:1})])),_:1})):x("",!0),l.data.exchange_price>0?(o(),i(r,{key:3,class:"detail_txt1"},{default:c((()=>[m(r,null,{default:c((()=>[g("积分抵扣")])),_:1}),m(r,{class:"span"},{default:c((()=>[g("-¥"+k(l.data.exchange_price),1)])),_:1})])),_:1})):x("",!0),m(r,{class:"detail_txt1"},{default:c((()=>[m(r),"integral"!=l.data.order_type?(o(),i(r,{key:0,class:"span"},{default:c((()=>[m(r,null,{default:c((()=>[g("实付款：")])),_:1}),m(r,{class:"red"},{default:c((()=>[g("¥"+k(l.data.pay_price),1)])),_:1})])),_:1})):(o(),i(r,{key:1,class:"span"},{default:c((()=>[m(r,null,{default:c((()=>[g("实付积分：")])),_:1}),m(r,{class:"red"},{default:c((()=>[g(k(l.data.exchange_integral),1)])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),m(r,{class:"space_footer"})])),_:1}),m(r,{class:"footer"},{default:c((()=>[m(r,{class:"footer_ctt"},{default:c((()=>[m(r,{class:"detail_btn_ctr"},{default:c((()=>["已取消"==l.data.order_state?(o(),i(r,{key:0,class:"detail_btn",onClick:t[1]||(t[1]=a=>d.delOrder(l.data.id))},{default:c((()=>[g("删除订单")])),_:1})):x("",!0),"待付款"==l.data.order_state?(o(),y(h,{key:1},[m(r,{class:"detail_btn",onClick:t[2]||(t[2]=a=>d.cancelOrder(l.data.id))},{default:c((()=>[g("取消订单")])),_:1}),m(r,{class:"detail_btn_on",onClick:t[3]||(t[3]=a=>d.turnUrl("/pages/pay/index?sn="+l.data.order_sn))},{default:c((()=>[g("去付款")])),_:1})],64)):x("",!0),"待发货"==l.data.order_state?(o(),y(h,{key:2},[m(r,{class:"detail_btn"},{default:c((()=>[m(r,{onClick:d.onCall},{default:c((()=>[g("提醒发货")])),_:1},8,["onClick"])])),_:1}),1==l.data.is_refund&&0==l.data.refund_state?(o(),i(r,{key:0,class:"detail_btn_on",onClick:t[4]||(t[4]=a=>d.turnUrl("/pages/refund/index?id="+l.data.id))},{default:c((()=>[g("申请退款")])),_:1})):x("",!0)],64)):x("",!0),"待收货"==l.data.order_state?(o(),y(h,{key:3},[1==l.data.is_refund&&0==l.data.refund_state?(o(),i(r,{key:0,class:"detail_btn",onClick:t[5]||(t[5]=a=>d.turnUrl("/pages/refund/index?id="+l.data.id))},{default:c((()=>[g("退换货")])),_:1})):x("",!0),1==l.data.express_type&&""!=l.data.express_sn?(o(),i(r,{key:1,class:"detail_btn",onClick:t[6]||(t[6]=a=>d.turnUrl("/pages/order/express?id="+l.data.id))},{default:c((()=>[g("查看物流")])),_:1})):x("",!0),m(r,{class:"detail_btn_on",onClick:t[7]||(t[7]=a=>d.receiptOrder(l.data.id))},{default:c((()=>[g("确认收货")])),_:1})],64)):x("",!0),"已完成"==l.data.order_state?(o(),y(h,{key:4},[1==l.data.is_refund&&0==l.data.refund_state?(o(),i(r,{key:0,class:"detail_btn",onClick:t[8]||(t[8]=a=>d.turnUrl("/pages/refund/index?id="+l.data.id))},{default:c((()=>[g("退换货")])),_:1})):x("",!0),1==l.data.express_type&&""!=l.data.express_sn?(o(),i(r,{key:1,class:"detail_btn",onClick:t[9]||(t[9]=a=>d.turnUrl("/pages/order/express?id="+l.data.id))},{default:c((()=>[g("查看物流")])),_:1})):x("",!0)],64)):x("",!0)])),_:1})])),_:1})])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-537acc65"]]);export{j as default};
