import{g as e,a as t,c as a,h as s,n as l,d as r,r as n,B as i,A as o,m as d,o as c,e as _,w as u,f,i as p,j as g,k as m,l as k,F as y,q as h,t as C,v as b,p as x,u as v,C as D,x as w}from"./index-8b182b74.js";import{_ as j}from"./uv-loading-page.792746ec.js";import{_ as U,r as L}from"./uni-app.es.90f08a56.js";import{_ as O}from"./uv-tabs.cc31570f.js";import{_ as T}from"./uv-empty.ae111bf2.js";import"./uv-badge.8ff43380.js";import"./uv-icon.70699d37.js";const I=U({data:()=>({theme:"",loading:!0,tabsTitle:[{name:"全部"},{name:"待付款"},{name:"待发货"},{name:"待收货"},{name:"已完成"}],currentTab:0,lineColor:"",dataList:[]}),onLoad(e){let t=this;Reflect.ownKeys(e).length>0&&e.hasOwnProperty("state")&&(t.currentTab=parseInt(e.state))},onShow(){let t=p(),a=e(),s={goods_id:0,url:a[a.length-1].route,platform:t.globalData.systemInfo.uniPlatform,model:t.globalData.systemInfo.deviceModel};this.$apis.visit.add(s),this.initData()},onPullDownRefresh(){t({title:"加载中"}),this.initData("refresh")},methods:{async initData(e=""){let t,l=p(),r=this;await r.$onLaunched,r.theme=l.globalData.theme,r.lineColor=l.globalData.themeColor,t=await r.$apis.order.getList({size:1e3,state:r.currentTab}),r.dataList=t.data,"refresh"==e&&a(),s(),r.loading=!1},tabChange(e){this.currentTab=e.index,t({title:"加载中"}),this.initData()},turnUrl(e="",t=1){e&&"#"!=e&&(1==t&&l({url:e}),2==t&&r({url:e}),3==t&&n({url:e}))},cancelOrder(e){let a=this;i({title:"提示",content:"确认要取消订单吗？",success(l){l.confirm&&(t({title:"加载中"}),a.$apis.order.cancelData({id:e}).then((e=>{s(),0==e.code?a.initData():o({title:e.msg,icon:"none"})})))}})},delOrder(e){let a=this;i({title:"提示",content:"确认要删除订单吗？",success(l){l.confirm&&(t({title:"加载中"}),a.$apis.order.deleteData({id:e}).then((e=>{s(),0==e.code?a.initData():o({title:e.msg,icon:"none"})})))}})},receiptOrder(e){let a=this;i({title:"提示",content:"确认已收到货了吗？",success(l){l.confirm&&(t({title:"加载中"}),a.$apis.order.receiptData({id:e}).then((e=>{s(),0==e.code?a.initData():o({title:e.msg,icon:"none"})})))}})},onCall(){let e=p();d({phoneNumber:e.globalData.siteInfo.phone})}}},[["render",function(e,t,a,s,l,r){const n=L(b("uv-loading-page"),j),i=L(b("uv-tabs"),O),o=g,d=w,p=L(b("uv-empty"),T);return c(),_(o,{class:f(["content",l.theme])},{default:u((()=>[m(n,{loading:l.loading},null,8,["loading"]),l.loading?C("",!0):(c(),k(y,{key:0},[m(o,{class:"header"},{default:u((()=>[m(o,{class:"header_ctt"},{default:u((()=>[m(i,{list:l.tabsTitle,current:l.currentTab,inactiveStyle:{color:"#999",transform:"scale(1)"},activeStyle:{color:"#333",transform:"scale(1.05)",fontWeight:"bold"},lineColor:l.lineColor,scrollable:!1,onChange:r.tabChange},null,8,["list","current","inactiveStyle","activeStyle","lineColor","onChange"])])),_:1})])),_:1}),m(o,{class:"wrap"},{default:u((()=>[m(o,{class:"space_header"}),m(o,{class:"m_ctr"},{default:u((()=>[m(o,{class:"space_ctr"}),(c(!0),k(y,null,h(l.dataList,((e,t)=>(c(),_(o,{class:"yuan_ctr",key:t},{default:u((()=>[m(o,{class:"order_list_title"},{default:u((()=>[m(o,null,{default:u((()=>[x("订单号："+v(e.order_sn)+" ["+v(e.order_type_title)+"]",1)])),_:2},1024),m(o,{class:"span"},{default:u((()=>[x(v(e.order_state),1)])),_:2},1024)])),_:2},1024),(c(!0),k(y,null,h(e.goods_list,((t,a)=>(c(),_(o,{class:"order_goods_ctr",key:a,onClick:t=>r.turnUrl("/pages/order/detail?id="+e.id)},{default:u((()=>[m(o,{class:"order_goods_pic"},{default:u((()=>[m(d,{mode:"widthFix",src:t.goods_pic},null,8,["src"])])),_:2},1024),m(o,{class:"order_goods_ctt"},{default:u((()=>[m(o,{class:"order_goods_title",style:D(""==t.spec_key_name?"-webkit-line-clamp:2;":"")},{default:u((()=>[x(v(t.goods_title),1)])),_:2},1032,["style"]),""!=t.spec_key_name?(c(),_(o,{key:0,class:"order_goods_subtitle"},{default:u((()=>[x(v(t.spec_key_name),1)])),_:2},1024)):C("",!0)])),_:2},1024),m(o,{class:"order_goods_price"},{default:u((()=>[m(o,null,{default:u((()=>[x("¥"+v(t.price),1)])),_:2},1024),m(o,null,{default:u((()=>[x("×"+v(t.amount),1)])),_:2},1024),e.order_state_no>1&&e.refund_state>0?(c(),_(o,{key:0,class:"span"},{default:u((()=>[x("退款中")])),_:1})):C("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),m(o,{class:"order_price"},{default:u((()=>[m(o,{class:"price"},{default:u((()=>[m(o,{class:"span"},{default:u((()=>[x("总价¥")])),_:1}),m(o,null,{default:u((()=>[x(v(e.price),1)])),_:2},1024)])),_:2},1024),"integral"!=e.order_type?(c(),_(o,{key:0,class:"pay_price"},{default:u((()=>[m(o,{class:"span"},{default:u((()=>[x("实付款¥")])),_:1}),m(o,null,{default:u((()=>[x(v(e.pay_price),1)])),_:2},1024)])),_:2},1024)):(c(),_(o,{key:1,class:"pay_price"},{default:u((()=>[m(o,{class:"span"},{default:u((()=>[x("实付积分")])),_:1}),m(o,{style:{"padding-left":"4rpx"}},{default:u((()=>[x(v(e.exchange_integral),1)])),_:2},1024)])),_:2},1024))])),_:2},1024),m(o,{class:"order_list_btn_ctr"},{default:u((()=>["已取消"==e.order_state?(c(),_(o,{key:0,class:"order_list_btn",onClick:t=>r.delOrder(e.id)},{default:u((()=>[x("删除订单")])),_:2},1032,["onClick"])):C("",!0),"待付款"==e.order_state?(c(),k(y,{key:1},[m(o,{class:"order_list_btn",onClick:t=>r.cancelOrder(e.id)},{default:u((()=>[x("取消订单")])),_:2},1032,["onClick"]),m(o,{class:"order_list_btn_on",onClick:t=>r.turnUrl("/pages/pay/index?sn="+e.order_sn)},{default:u((()=>[x("去付款")])),_:2},1032,["onClick"])],64)):C("",!0),"待发货"==e.order_state?(c(),k(y,{key:2},[m(o,{class:"order_list_btn"},{default:u((()=>[m(o,{onClick:r.onCall},{default:u((()=>[x("提醒发货")])),_:1},8,["onClick"])])),_:1}),1==e.is_refund&&0==e.refund_state?(c(),_(o,{key:0,class:"order_list_btn_on",onClick:t=>r.turnUrl("/pages/refund/index?id="+e.id)},{default:u((()=>[x("申请退款")])),_:2},1032,["onClick"])):C("",!0)],64)):C("",!0),"待收货"==e.order_state?(c(),k(y,{key:3},[1==e.is_refund&&0==e.refund_state?(c(),_(o,{key:0,class:"order_list_btn",onClick:t=>r.turnUrl("/pages/refund/index?id="+e.id)},{default:u((()=>[x("退换货")])),_:2},1032,["onClick"])):C("",!0),1==e.express_type&&""!=e.express_sn?(c(),_(o,{key:1,class:"order_list_btn",onClick:t=>r.turnUrl("/pages/order/express?id="+e.id)},{default:u((()=>[x("查看物流")])),_:2},1032,["onClick"])):C("",!0),m(o,{class:"order_list_btn_on",onClick:t=>r.receiptOrder(e.id)},{default:u((()=>[x("确认收货")])),_:2},1032,["onClick"])],64)):C("",!0),"已完成"==e.order_state?(c(),k(y,{key:4},[1==e.is_refund&&0==e.refund_state?(c(),_(o,{key:0,class:"order_list_btn",onClick:t=>r.turnUrl("/pages/refund/index?id="+e.id)},{default:u((()=>[x("退换货")])),_:2},1032,["onClick"])):C("",!0),1==e.express_type&&""!=e.express_sn?(c(),_(o,{key:1,class:"order_list_btn",onClick:t=>r.turnUrl("/pages/order/express?id="+e.id)},{default:u((()=>[x("查看物流")])),_:2},1032,["onClick"])):C("",!0)],64)):C("",!0)])),_:2},1024)])),_:2},1024)))),128)),l.dataList.length<1?(c(),_(o,{key:0,class:"none_ctr"},{default:u((()=>[m(p,{icon:"/static/images/none.png",text:"暂无订单"})])),_:1})):C("",!0)])),_:1})])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-318ce18e"]]);export{I as default};
