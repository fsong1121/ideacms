import{g as a,n as t,d as s,r as e,m as l,H as d,A as c,a as o,h as _,e as i,o as n,f as u,w as r,i as f,j as p,k as m,l as g,p as x,F as y,t as h,q as k,v as b,u as C,M as v,N as w,O as D,C as E,x as I}from"./index-ozoT3Rek.js";import{_ as S}from"./uv-loading-page.tTreRwcr.js";import{_ as $,r as j}from"./uni-app.es.Cr4agT_b.js";import{_ as z}from"./uv-icon.uym7Qx1m.js";const F=$({data:()=>({theme:"",loading:!0,currentID:0,data:{},shopConfig:{},showExpress:0}),onLoad(a){let t=this;Reflect.ownKeys(a).length>0&&(t.currentID=a.hasOwnProperty("id")?a.id:0)},onShow(){let t=p(),s=a(),e={goods_id:0,url:s[s.length-1].route,platform:t.globalData.systemInfo.uniPlatform,model:t.globalData.systemInfo.deviceModel};this.$apis.visit.add(e),this.initData()},methods:{async initData(){let a,t=p(),s=this;await s.$onLaunched,s.theme=t.globalData.theme,a=await s.$apis.config.getShop(),s.shopConfig=a.data,a=await s.$apis.refund.getData({id:s.currentID}),0==a.code?s.data=a.data:s.data={},s.loading=!1},turnUrl(a="",l=1){a&&"#"!=a&&(1==l&&t({url:a}),2==l&&s({url:a}),3==l&&e({url:a}))},changeExpress(a){this.showExpress=a},onCall(){let a=p();l({phoneNumber:a.globalData.siteInfo.phone})},formSubmit(a){let t=this,s=a.detail.value;s.id=t.data.id,s.form_token=d("formToken")||"",uni.$uv.throttle((function(){let a=s.express_title.replace(/\s/g,""),e=s.express_sn.replace(/\s/g,"");""!=a?""!=e?(o({title:"提交中"}),t.$apis.refund.saveExpressData(s).then((a=>{_(),0==a.code?(t.showExpress=0,t.initData()):c({title:a.msg,icon:"none",duration:2e3})}))):c({title:"快递编号为空",icon:"error"}):c({title:"快递公司为空",icon:"error"})}))}}},[["render",function(a,t,s,e,l,d){const c=j(i("uv-loading-page"),S),o=m,_=I,p=j(i("uv-icon"),z),$=v,F=w,H=D;return n(),u(o,{class:f(["content",l.theme])},{default:r((()=>[g(c,{loading:l.loading},null,8,["loading"]),l.loading?C("",!0):(n(),x(y,{key:0},[g(o,{class:"wrap"},{default:r((()=>[g(o,{class:"m_ctr"},{default:r((()=>[g(o,{class:"space_ctr"}),g(o,{class:"yuan_ctr"},{default:r((()=>[(n(!0),x(y,null,h(l.data.goods_list,((a,t)=>(n(),u(o,{key:t,class:"order_goods_ctr",onClick:t=>d.turnUrl("/pages/goods/detail?id="+a.goods_id)},{default:r((()=>[g(o,{class:"order_goods_pic"},{default:r((()=>[g(_,{mode:"widthFix",src:a.goods_pic},null,8,["src"])])),_:2},1024),g(o,{class:"order_goods_ctt"},{default:r((()=>[g(o,{class:"order_goods_title",style:E(""==a.spec_key_name?"-webkit-line-clamp:2;":"")},{default:r((()=>[k(b(a.goods_title),1)])),_:2},1032,["style"]),""!=a.spec_key_name?(n(),u(o,{key:0,class:"order_goods_subtitle"},{default:r((()=>[k(b(a.spec_key_name),1)])),_:2},1024)):C("",!0)])),_:2},1024),g(o,{class:"order_goods_price"},{default:r((()=>[g(o,null,{default:r((()=>[k("¥"+b(a.price),1)])),_:2},1024),g(o,null,{default:r((()=>[k("×"+b(a.amount),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),g(o,{class:"yuan_ctr"},{default:r((()=>[g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("订单编号")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.order_sn),1)])),_:1})])),_:1}),g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退款单号")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.sn),1)])),_:1})])),_:1}),g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("申请时间")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.add_date),1)])),_:1})])),_:1}),l.data.price>0?(n(),u(o,{key:0,class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退款金额")])),_:1}),g(o,{class:"span"},{default:r((()=>[k("¥"+b(l.data.price),1)])),_:1})])),_:1})):C("",!0),l.data.integral>0?(n(),u(o,{key:1,class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退还积分")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.integral),1)])),_:1})])),_:1})):C("",!0)])),_:1}),g(o,{class:"yuan_ctr"},{default:r((()=>[g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退款类型")])),_:1}),1==l.data.type?(n(),u(o,{key:0,class:"span"},{default:r((()=>[k("仅退款")])),_:1})):C("",!0),2==l.data.type?(n(),u(o,{key:1,class:"span"},{default:r((()=>[k("退货退款")])),_:1})):C("",!0)])),_:1}),g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退款原因")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.reason),1)])),_:1})])),_:1}),""!=l.data.info?(n(),u(o,{key:0,class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("补充原因")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.info),1)])),_:1})])),_:1})):C("",!0),g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退款状态")])),_:1}),0==l.data.state?(n(),u(o,{key:0,class:"span"},{default:r((()=>[k("退款中")])),_:1})):C("",!0),1==l.data.state?(n(),u(o,{key:1,class:"span"},{default:r((()=>[k("已成功")])),_:1})):C("",!0),-1==l.data.state?(n(),u(o,{key:2,class:"span"},{default:r((()=>[k("已驳回")])),_:1})):C("",!0),-2==l.data.state?(n(),u(o,{key:3,class:"span"},{default:r((()=>[k("已取消")])),_:1})):C("",!0)])),_:1}),""!=l.data.reply_date?(n(),u(o,{key:1,class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("处理时间")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.reply_date),1)])),_:1})])),_:1})):C("",!0),-1==l.data.state?(n(),u(o,{key:2,class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("处理意见")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.reply_info),1)])),_:1})])),_:1})):C("",!0)])),_:1}),2==l.data.type?(n(),u(o,{key:0,class:"yuan_ctr"},{default:r((()=>[g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退货地址")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.shopConfig.refund_name)+","+b(l.shopConfig.refund_tel)+","+b(l.shopConfig.refund_address),1)])),_:1})])),_:1})])),_:1})):C("",!0),2==l.data.type?(n(),u(o,{key:1,class:"yuan_ctr"},{default:r((()=>[g(o,{class:"detail_txt"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("退货物流")])),_:1}),g(o,{class:"span"},{default:r((()=>[k(b(l.data.express_title)+" "+b(l.data.express_sn),1)])),_:1}),g(o,{class:"add",onClick:t[0]||(t[0]=a=>{d.changeExpress(1)})},{default:r((()=>[g(p,{name:"add-o","custom-prefix":"custom-icon",size:"40rpx"})])),_:1})])),_:1})])),_:1})):C("",!0)])),_:1}),g(o,{class:"space_footer"})])),_:1}),g(o,{class:"footer"},{default:r((()=>[g(o,{class:"footer_ctt"},{default:r((()=>[g(o,{class:"detail_btn_ctr"},{default:r((()=>[g(o,{class:"detail_btn"},{default:r((()=>[g(p,{name:"service","custom-prefix":"custom-icon",size:"36rpx",bold:!0,onClick:d.onCall},null,8,["onClick"]),g(o,{class:"txt",onClick:d.onCall},{default:r((()=>[k("联系客服")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),l.showExpress?(n(),u(H,{key:0,onSubmit:d.formSubmit},{default:r((()=>[g(o,{class:"express_ctr"},{default:r((()=>[g(o,{class:"express_ctt"},{default:r((()=>[g(o,{class:"close",onClick:t[1]||(t[1]=a=>{d.changeExpress(0)})},{default:r((()=>[g(p,{name:"close","custom-prefix":"custom-icon",size:"40rpx"})])),_:1}),g(o,{class:"express_title"},{default:r((()=>[k("退货物流信息")])),_:1}),g(o,{class:"input_ctr"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("快递公司")])),_:1}),g($,{name:"express_title",class:"input",value:l.data.express_title,placeholder:"快递公司"},null,8,["value"])])),_:1}),g(o,{class:"input_ctr"},{default:r((()=>[g(o,{class:"title"},{default:r((()=>[k("快递编号")])),_:1}),g($,{name:"express_sn",class:"input",value:l.data.express_sn,placeholder:"快递编号"},null,8,["value"])])),_:1}),g(F,{class:"address_btn","form-type":"submit"},{default:r((()=>[k("确认提交")])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])):C("",!0)],64))])),_:1},8,["class"])}],["__scopeId","data-v-20905b2d"]]);export{F as default};
