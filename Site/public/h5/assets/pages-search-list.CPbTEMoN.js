import{g as e,h as s,n as a,d as t,r as l,a as o,e as r,o as d,f as i,w as c,i as _,j as n,k as p,l as u,p as y,q as g,F as f,t as w,u as h,W as m,v as T,x as k}from"./index-CP7J3jEj.js";import{_ as v}from"./uv-loading-page.CzAcxD5Y.js";import{_ as x,r as L}from"./uni-app.es.CkShW-16.js";import{_ as C}from"./uv-divider.B6-AYK5V.js";import{_ as j}from"./uv-empty.IRKFj8Dh.js";import"./uv-icon.CCP1ZI1Q.js";const D=x({data:()=>({theme:"",loading:!0,keys:"",order:"id",orderType:"desc",activityType:"",size:20,page:1,loadingComplete:!1,dataList:[]}),onLoad(e){let s=this;Reflect.ownKeys(e).length>0&&e.hasOwnProperty("key")&&(s.keys=e.key),s.initData()},onShow(){let s=n(),a=e(),t={goods_id:0,url:a[a.length-1].route,platform:s.globalData.systemInfo.uniPlatform,model:s.globalData.systemInfo.deviceModel};this.$apis.visit.add(t)},methods:{async initData(e=!1){let a,t=n(),l=this;await l.$onLaunched,l.theme=t.globalData.theme,a=await l.$apis.goods.getList({field:"id,title,pic,price,market_price",keys:l.keys,activity_type:l.activityType,order:l.order,order_type:l.orderType,size:l.size,page:l.page}),l.dataList=1==e?l.dataList.concat(a.data):a.data,a.count<l.size&&(l.loadingComplete=!0),s(),l.loading=!1},turnUrl(e="",s=1){e&&"#"!=e&&(1==s&&a({url:e}),2==s&&t({url:e}),3==s&&l({url:e}))},changeType(e){let s=this;s.order=e;let a="desc"==s.orderType?"asc":"desc";"id"==e&&(a="desc"),s.orderType=a,s.page=1,s.loadingComplete=!1,o({title:"加载中"}),s.initData()},scrollToLower(){let e=this;e.loadingComplete||(e.page=e.page+1,o({title:"加载中"}),e.initData(!0))}}},[["render",function(e,s,a,t,l,o){const n=L(r("uv-loading-page"),v),x=p,D=k,z=L(r("uv-divider"),C),S=L(r("uv-empty"),j),b=m;return d(),i(x,{class:_(["content",l.theme])},{default:c((()=>[u(n,{loading:l.loading},null,8,["loading"]),l.loading?h("",!0):(d(),y(f,{key:0},[u(x,{class:"goods_header"},{default:c((()=>[u(x,{class:"header_ctt"},{default:c((()=>[u(x,{class:"list_top"},{default:c((()=>[u(x,{class:"list_top_ctr"},{default:c((()=>[u(x,{class:"list_top_cell",onClick:s[0]||(s[0]=e=>o.changeType("id"))},{default:c((()=>[u(x,{class:_({list_top_text_on:"id"==l.order})},{default:c((()=>[g("综合")])),_:1},8,["class"])])),_:1})])),_:1}),u(x,{class:"list_top_ctr"},{default:c((()=>[u(x,{class:"list_top_cell",onClick:s[1]||(s[1]=e=>o.changeType("sales"))},{default:c((()=>[u(x,{class:_({list_top_text_on:"sales"==l.order})},{default:c((()=>[g("销量")])),_:1},8,["class"]),u(x,{class:"list_top_arrow"},{default:c((()=>[u(x,{class:_({arrow_up_on:"sales"==l.order&&"asc"==l.orderType,arrow_up:"sales"!==l.order||"asc"!==l.orderType})},null,8,["class"]),u(x,{class:_({arrow_down_on:"sales"==l.order&&"desc"==l.orderType,arrow_down:"sales"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),u(x,{class:"list_top_ctr"},{default:c((()=>[u(x,{class:"list_top_cell",onClick:s[2]||(s[2]=e=>o.changeType("price"))},{default:c((()=>[u(x,{class:_({list_top_text_on:"price"===l.order})},{default:c((()=>[g("价格")])),_:1},8,["class"]),u(x,{class:"list_top_arrow"},{default:c((()=>[u(x,{class:_({arrow_up_on:"price"==l.order&&"asc"==l.orderType,arrow_up:"price"!==l.order||"asc"!==l.orderType})},null,8,["class"]),u(x,{class:_({arrow_down_on:"price"==l.order&&"desc"==l.orderType,arrow_down:"price"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),u(x,{class:"list_top_ctr"},{default:c((()=>[u(x,{class:"list_top_cell",onClick:s[3]||(s[3]=e=>o.changeType("hits"))},{default:c((()=>[u(x,{class:_({list_top_text_on:"hits"===l.order})},{default:c((()=>[g("热度")])),_:1},8,["class"]),u(x,{class:"list_top_arrow"},{default:c((()=>[u(x,{class:_({arrow_up_on:"hits"==l.order&&"asc"==l.orderType,arrow_up:"hits"!==l.order||"asc"!==l.orderType})},null,8,["class"]),u(x,{class:_({arrow_down_on:"hits"==l.order&&"desc"==l.orderType,arrow_down:"hits"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(x,{class:"wrap"},{default:c((()=>[u(b,{class:"list_ctr","scroll-y":"true",onScrolltolower:o.scrollToLower},{default:c((()=>[u(x,{class:"goods_list_ctr"},{default:c((()=>[(d(!0),y(f,null,w(l.dataList,((e,s)=>(d(),i(x,{class:"goods_list_cell",key:s},{default:c((()=>[u(x,{onClick:s=>o.turnUrl("/pages/goods/detail?id="+e.id)},{default:c((()=>[u(D,{mode:"widthFix",src:e.pic},null,8,["src"]),u(x,{class:"goods_list_t1"},{default:c((()=>[g(T(e.title),1)])),_:2},1024),u(x,{class:"goods_list_t2"},{default:c((()=>[u(x,null,{default:c((()=>[g("¥"+T(e.price),1)])),_:2},1024),u(x,{class:"span"},{default:c((()=>[g("¥"+T(e.market_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),l.dataList.length>0?(d(),i(x,{key:0,class:"line_ctr"},{default:c((()=>[u(z,{textSize:"24rpx",text:"这是我的底线"})])),_:1})):h("",!0),l.dataList.length<1?(d(),i(x,{key:1,class:"none_ctr"},{default:c((()=>[u(S,{icon:"/static/images/none.png",text:"暂无商品"})])),_:1})):h("",!0)])),_:1})])),_:1},8,["onScrolltolower"])])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-76c65469"]]);export{D as default};
