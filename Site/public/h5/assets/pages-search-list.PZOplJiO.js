import{g as e,a as s,h as a,c as t,n as l,d as o,r,e as d,f as i,w as c,i as _,j as n,k as p,o as u,l as g,p as f,q as y,F as h,t as w,u as m,V as T,v as k,x as v}from"./index-qqngRkUa.js";import{_ as x}from"./uv-loading-page.B-dgjlQB.js";import{_ as C,r as L}from"./uni-app.es.DMzxE133.js";import{_ as D}from"./uv-divider.DZeIP-Lg.js";import{_ as j}from"./uv-empty.BEvkJ93x.js";import"./uv-icon.BH_bzOnD.js";const z=C({data:()=>({theme:"",loading:!0,keys:"",order:"id",orderType:"desc",activityType:"",size:20,page:1,loadingComplete:!1,dataList:[]}),onLoad(e){let s=this;Reflect.ownKeys(e).length>0&&e.hasOwnProperty("key")&&(s.keys=e.key),s.initData()},onShow(){let s=n(),a=e(),t={goods_id:0,url:a[a.length-1].route,platform:s.globalData.systemInfo.uniPlatform,model:s.globalData.systemInfo.deviceModel};this.$apis.visit.add(t)},onPullDownRefresh(){let e=this;e.page=1,e.loadingComplete=!1,s({title:"加载中"}),e.initData("refresh")},methods:{async initData(e="",s=!1){let l,o=n(),r=this;await r.$onLaunched,r.theme=o.globalData.theme,l=await r.$apis.goods.getList({field:"id,title,pic,price,market_price",keys:r.keys,activity_type:r.activityType,order:r.order,order_type:r.orderType,size:r.size,page:r.page}),r.dataList=1==s?r.dataList.concat(l.data):l.data,l.data.length<r.size&&(r.loadingComplete=!0),"refresh"==e&&(a(),t()),a(),r.loading=!1},turnUrl(e="",s=1){e&&"#"!=e&&(1==s&&l({url:e}),2==s&&o({url:e}),3==s&&r({url:e}))},changeType(e){let a=this;a.order=e;let t="desc"==a.orderType?"asc":"desc";"id"==e&&(t="desc"),a.orderType=t,a.page=1,a.loadingComplete=!1,s({title:"加载中"}),a.initData()},scrollToLower(){let e=this;e.loadingComplete||(e.page=e.page+1,s({title:"加载中"}),e.initData("",!0))}}},[["render",function(e,s,a,t,l,o){const r=L(d("uv-loading-page"),x),n=p,C=v,z=L(d("uv-divider"),D),I=L(d("uv-empty"),j),S=T;return u(),i(n,{class:_(["content",l.theme])},{default:c((()=>[g(r,{loading:l.loading},null,8,["loading"]),l.loading?m("",!0):(u(),f(h,{key:0},[g(n,{class:"goods_header"},{default:c((()=>[g(n,{class:"header_ctt"},{default:c((()=>[g(n,{class:"list_top"},{default:c((()=>[g(n,{class:"list_top_ctr"},{default:c((()=>[g(n,{class:"list_top_cell",onClick:s[0]||(s[0]=e=>o.changeType("id"))},{default:c((()=>[g(n,{class:_({list_top_text_on:"id"==l.order})},{default:c((()=>[y("综合")])),_:1},8,["class"])])),_:1})])),_:1}),g(n,{class:"list_top_ctr"},{default:c((()=>[g(n,{class:"list_top_cell",onClick:s[1]||(s[1]=e=>o.changeType("sales"))},{default:c((()=>[g(n,{class:_({list_top_text_on:"sales"==l.order})},{default:c((()=>[y("销量")])),_:1},8,["class"]),g(n,{class:"list_top_arrow"},{default:c((()=>[g(n,{class:_({arrow_up_on:"sales"==l.order&&"asc"==l.orderType,arrow_up:"sales"!==l.order||"asc"!==l.orderType})},null,8,["class"]),g(n,{class:_({arrow_down_on:"sales"==l.order&&"desc"==l.orderType,arrow_down:"sales"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),g(n,{class:"list_top_ctr"},{default:c((()=>[g(n,{class:"list_top_cell",onClick:s[2]||(s[2]=e=>o.changeType("price"))},{default:c((()=>[g(n,{class:_({list_top_text_on:"price"===l.order})},{default:c((()=>[y("价格")])),_:1},8,["class"]),g(n,{class:"list_top_arrow"},{default:c((()=>[g(n,{class:_({arrow_up_on:"price"==l.order&&"asc"==l.orderType,arrow_up:"price"!==l.order||"asc"!==l.orderType})},null,8,["class"]),g(n,{class:_({arrow_down_on:"price"==l.order&&"desc"==l.orderType,arrow_down:"price"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1}),g(n,{class:"list_top_ctr"},{default:c((()=>[g(n,{class:"list_top_cell",onClick:s[3]||(s[3]=e=>o.changeType("hits"))},{default:c((()=>[g(n,{class:_({list_top_text_on:"hits"===l.order})},{default:c((()=>[y("热度")])),_:1},8,["class"]),g(n,{class:"list_top_arrow"},{default:c((()=>[g(n,{class:_({arrow_up_on:"hits"==l.order&&"asc"==l.orderType,arrow_up:"hits"!==l.order||"asc"!==l.orderType})},null,8,["class"]),g(n,{class:_({arrow_down_on:"hits"==l.order&&"desc"==l.orderType,arrow_down:"hits"!==l.order||"desc"!==l.orderType})},null,8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(n,{class:"wrap"},{default:c((()=>[g(S,{class:"list_ctr","scroll-y":"true",onScrolltolower:o.scrollToLower},{default:c((()=>[g(n,{class:"goods_list_ctr"},{default:c((()=>[(u(!0),f(h,null,w(l.dataList,((e,s)=>(u(),i(n,{class:"goods_list_cell",key:s},{default:c((()=>[g(n,{onClick:s=>o.turnUrl("/pages/goods/detail?id="+e.id)},{default:c((()=>[g(C,{mode:"widthFix",src:e.pic},null,8,["src"]),g(n,{class:"goods_list_t1"},{default:c((()=>[y(k(e.title),1)])),_:2},1024),g(n,{class:"goods_list_t2"},{default:c((()=>[g(n,null,{default:c((()=>[y("¥"+k(e.price),1)])),_:2},1024),g(n,{class:"span"},{default:c((()=>[y("¥"+k(e.market_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),l.dataList.length>0?(u(),i(n,{key:0,class:"line_ctr"},{default:c((()=>[g(z,{textSize:"24rpx",text:"这是我的底线"})])),_:1})):m("",!0),l.dataList.length<1?(u(),i(n,{key:1,class:"none_ctr"},{default:c((()=>[g(I,{icon:"/static/images/none.png",text:"暂无商品"})])),_:1})):m("",!0)])),_:1})])),_:1},8,["onScrolltolower"])])),_:1})],64))])),_:1},8,["class"])}],["__scopeId","data-v-2ee88184"]]);export{z as default};
