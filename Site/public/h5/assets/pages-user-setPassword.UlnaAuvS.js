import{g as a,H as t,A as e,a as s,h as l,U as o,K as i,e as n,f as d,w as r,i as u,j as c,k as m,o as p,l as f,q as _,u as g,M as h,N as b,O as w}from"./index-CGszr9qB.js";import{_ as v}from"./uv-loading-page.DMunDfme.js";import{_ as y,r as k}from"./uni-app.es.CLj63pkI.js";const D=y({data:()=>({theme:"",loading:!0}),onLoad(){this.initData()},onShow(){let t=c(),e=a(),s={goods_id:0,url:e[e.length-1].route,platform:t.globalData.systemInfo.uniPlatform,model:t.globalData.systemInfo.deviceModel};this.$apis.visit.add(s)},methods:{async initData(){let a=c(),t=this;await t.$onLaunched,t.theme=a.globalData.theme,await t.$apis.login.checkLogin(),t.loading=!1},formSubmit(a){let n=this,d=a.detail.value;d.form_token=t("formToken")||"",uni.$uv.throttle((function(){let a=d.pwd.replace(/\s/g,""),t=d.vpwd.replace(/\s/g,"");""!=a&&a==t?(s({title:"提交中"}),n.$apis.user.savePwd(d).then((a=>{l(),0==a.code?(e({title:"修改成功"}),setTimeout((()=>{o(),i({delta:1})}),1500)):e({title:a.msg,icon:"none",duration:2e3})}))):e({title:"密码为空或不同",icon:"error"})}))}}},[["render",function(a,t,e,s,l,o){const i=k(n("uv-loading-page"),v),c=m,y=h,D=b,S=w;return p(),d(c,{class:u(["content",l.theme])},{default:r((()=>[f(i,{loading:l.loading},null,8,["loading"]),l.loading?g("",!0):(p(),d(S,{key:0,onSubmit:o.formSubmit},{default:r((()=>[f(c,{class:"wrap"},{default:r((()=>[f(c,{class:"m_ctr"},{default:r((()=>[f(c,{class:"space_ctr"}),f(c,{class:"yuan_ctr"},{default:r((()=>[f(c,{class:"input_ctr"},{default:r((()=>[f(c,{class:"input_title"},{default:r((()=>[_("新密码")])),_:1}),f(y,{name:"pwd",password:"",placeholder:"请输入新密码"})])),_:1}),f(c,{class:"input_ctr",style:{border:"0",padding:"0",margin:"0"}},{default:r((()=>[f(c,{class:"input_title"},{default:r((()=>[_("确认密码")])),_:1}),f(y,{name:"vpwd",password:"",placeholder:"请输入确认密码"})])),_:1})])),_:1}),f(D,{class:"submit_btn","form-type":"submit"},{default:r((()=>[_("确认提交")])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"]))])),_:1},8,["class"])}],["__scopeId","data-v-f0ed6b75"]]);export{D as default};
